
/*!
 * Queiroz.js 2.7.4
 * JavaScript Extension for Dimep Kairos
 * https://github.com/viniciusknob/queiroz.js
 */

!function(i){var e={DIV:"div",P:"p",SPAN:"span",STRONG:"strong"},t=function(){var i=function(i,e,t){var n=document.createElement(i);if(e&&(n.className=e),t){var r=document.createTextNode(t);n.appendChild(r)}return n},t=function(t,n){var r=i(e.SPAN,"qz-box qz-box-muted",t),a=i(e.STRONG,"qz-text-primary",n);return r.appendChild(a),r};return{STYLE:"<style>strong{font-weight:bold;}.ContentTable {margin-top:inherit;}.emptySlot,.FilledSlot,.LastSlot {height:inherit;padding:5px;}.FilledSlot span {margin:inherit!important;}.qz-text-primary {color:brown;}.qz-box {padding:5px 10px;margin:5px 1px;border:darkgrey 1px solid;}.qz-box-head {float:right;padding:10px 0;}.qz-box-muted {background-color:lightgray;}.qz-box .qz-box-content {vertical-align:middle;}.help-text {font-size:10px;}</style>",header:function(){return i(e.P,"qz-box-head")},headerLastWeekModeOn:function(){return t("","SEMANA ANTERIOR")},headerLaborTime:function(i){return t("Total: ",i)},headerTodayMissingTime:function(i){return t("Faltam/Hoje: ",i)},headerWeekMissingTime:function(i){return t("Faltam/Semana: ",i)},headerExtraTime:function(i){return t("Extra: ",i)},headerTimeToLeave:function(i){return t("Sa√≠da/Fim: ",i)},laborTimePerDay:function(t){var n=i(e.DIV,"help-text","Efetuado"),r=i(e.STRONG,"qz-box-content qz-text-primary",t),a=i(e.DIV,"qz-box qz-box-muted");return a.appendChild(n),a.appendChild(r),a},laborTimePerShift:function(t,n){var r=i(e.DIV,"qz-box qz-box-muted"),a=i(e.STRONG,"qz-box-content",t);if(!n){var o=i(e.DIV,"help-text","Trabalhando...");r.appendChild(o),a.style.color="darkgoldenrod"}return r.appendChild(a),r}}}();i.snippet=t}(window),function(i){var e=function(){return{append:function(i,e){var t=this;t.asyncReflow(function(){var n=t.get(i),r=document.createElement("div");"string"==typeof e?r.innerHTML=e:r.appendChild(e),n.appendChild(r)})},asyncReflow:function(i){setTimeout(i,25)},get:function(i,e){return(e||document).querySelector(i)},getAll:function(i,e){return(e||document).querySelectorAll(i)}}}();i.view=e}(window),function(i){var e=function(){var i={SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6},e=function(i){return i<10?"0"+i:i},t=function(){return{toMillis:function(i){return i*r.IN_HOUR}}}(),n=function(){return{toMillis:function(i){return i*r.IN_MINUTE}}}(),r=function(){return{IN_MINUTE:6e4,IN_HOUR:36e5,diff:function(i,e){return i instanceof Date&&e instanceof Date?e.getTime()-i.getTime():e-i},toHumanTime:function(i){var t=parseInt(i/36e5),n=parseInt(i/6e4%60);return e(t)+":"+e(n)}}}();return{Hour:t,Minute:n,Millis:r,Weekday:i,dateToHumanTime:function(i){return e(i.getHours())+":"+e(i.getMinutes())},isToday:function(i){var e=new Date;return i.getDate()===e.getDate()&&i.getMonth()===e.getMonth()&&i.getFullYear()===e.getFullYear()},toDate:function(i){var e=i.split(" "),t=e[0].split("_"),n=e[1].split(":");return new Date(t[2],t[1]-1,t[0],n[0],n[1])}}}();i.time=e}(window),function(i){var e=function(){return{textFormat:function(i,e){for(var t=0;t<e.length;t++){var n=new RegExp("\\{"+t+"\\}","g");i=i.replace(n,e[t])}return i}}}();i.util=e}(window),function(i,e,t,n,r){var a=function(){var i={INITIAL_WEEKDAY:t.Weekday.MONDAY,LAST_WEEK_MODE:!1,MAX_CONSECUTIVE_HOURS_PER_DAY:48,MAX_HOURS_PER_WEEK:44,MAX_MINUTES_PER_DAY:528,TAMPERMONKEY_DELAY_MILLIS:1e3},n={COLUMN_DAY:".DiaApontamento",CHECKPOINT:".FilledSlot span",DATE:"[id^=hiddenDiaApont]",HEADER:"#SemanaApontamentos div",TIME_IN:".TimeIN,.TimeINVisualizacao"},a=function(){return t.Hour.toMillis(i.MAX_HOURS_PER_WEEK)},o=function(){return t.Hour.toMillis(i.MAX_CONSECUTIVE_HOURS_PER_DAY)},m=function(){return t.Minute.toMillis(i.MAX_MINUTES_PER_DAY)},l={week:{laborTime:{millis:0,human:"",html:""},missingTime:{millis:0,human:"",html:""},extraTime:{millis:0,human:"",html:""},_computeMissingTimeInMillis:function(){return a()-this.laborTime.millis},_computeExtraTimeInMillis:function(){return this.laborTime.millis-a()},buildTime:function(){this.missingTime.millis=this._computeMissingTimeInMillis(),this.extraTime.millis=this._computeExtraTimeInMillis()},buildHumanTime:function(){this.laborTime.human=t.Millis.toHumanTime(this.laborTime.millis),this.missingTime.human=t.Millis.toHumanTime(this.missingTime.millis>0?this.missingTime.millis:0),this.extraTime.human=t.Millis.toHumanTime(this.extraTime.millis>0?this.extraTime.millis:0)},buildHtmlTime:function(){this.laborTime.html=r.headerLaborTime(this.laborTime.human),this.missingTime.html=r.headerWeekMissingTime(this.missingTime.human),this.extraTime.html=r.headerExtraTime(this.extraTime.human)}},today:{laborTime:{millis:0},missingTime:{millis:0,human:"",html:""},_computeMissingTimeInMillis:function(){return m()-this.laborTime.millis},buildTime:function(){this.missingTime.millis=this._computeMissingTimeInMillis()},buildHumanTime:function(){this.missingTime.human=t.Millis.toHumanTime(this.missingTime.millis>0?this.missingTime.millis:0)},buildHtmlTime:function(){this.missingTime.html=r.headerTodayMissingTime(this.missingTime.human)}}},u="",s=function(i){return e.getAll(n.CHECKPOINT,i)},T=function(i){return e.get(n.DATE,i).value},d=function(){if(l.week.missingTime.millis<=0)return"";if(l.week.missingTime.millis>m())return"";var i="";if(u){var e=u.getTime()+l.week.missingTime.millis;if(!e||e<(new Date).getTime())return"";var n=t.dateToHumanTime(new Date(e));i=r.headerTimeToLeave(n)}return i},c=function(){return l.week.missingTime.millis>=0?l.week.missingTime.html:l.week.extraTime.html},h=function(i){var e=r.header();return i.forEach(function(i){i&&e.appendChild(i)}),e},f=function(){l.week.buildHumanTime(),l.week.buildHtmlTime(),l.today.buildHumanTime(),l.today.buildHtmlTime();var t=i.LAST_WEEK_MODE?r.headerLastWeekModeOn():"",a=c(),o=d(),m=[t,l.week.laborTime.html,l.today.missingTime.html,a,o],u=h(m);e.append(n.HEADER,u)},E=function(){"ON"===i.LAST_WEEK_MODE&&(i.LAST_WEEK_MODE="DOING"),l.week.buildTime(),l.today.buildTime(),"DOING"!==i.LAST_WEEK_MODE&&f()},p=function(i,e,n){var a=t.Millis.toHumanTime(e),o=r.laborTimePerShift(a,n),m=document.createElement("div");m.appendChild(o);var l=i.parentNode;return l.parentNode.insertBefore(o,l.nextSibling),m},g=function(i,e){var n=t.Millis.toHumanTime(e);i.appendChild(r.laborTimePerDay(n))},M=function(r){var a=s(r);if(a.length){var m=0;e.getAll(n.TIME_IN,r).forEach(function(e,n){var s=e.textContent,d=t.toDate(T(r)+" "+s),c=a[2*n+1];if(c&&!c.parentElement.classList.contains("LastSlot")){var h=c.textContent,f=t.toDate(T(r)+" "+h),E=t.Millis.diff(d,f);m+=E,"DOING"!==i.LAST_WEEK_MODE&&p(c,E,!0),t.isToday(d)&&(l.today.laborTime.millis+=E)}else{u=d;var g=t.Millis.diff(d,new Date);g<o()&&p(e,E=m+g,!1)}}),l.week.laborTime.millis+=m,g(r,m)}},D=function(){var r=[],a=!1;return e.getAll(n.COLUMN_DAY).forEach(function(e){var n=T(e)+" 12:34",o=t.toDate(n);0===l.week.laborTime.millis?(a||(a=o.getDay()===i.INITIAL_WEEKDAY))&&r.push(e):o.getDay()===i.INITIAL_WEEKDAY?i.LAST_WEEK_MODE="DONE":"DOING"===i.LAST_WEEK_MODE&&r.push(e)}),r},_=function(){e.append("head",r.STYLE),D().forEach(M),E(),"DOING"===i.LAST_WEEK_MODE&&(mudarSemana(1,!0),setTimeout(A,1e3))},A=function(){var t=setInterval(function(){e.get(n.CHECKPOINT)&&(clearInterval(t),_())},i.TAMPERMONKEY_DELAY_MILLIS)};return{bless:function(t){return i.LAST_WEEK_MODE=!!t&&"ON","ON"===i.LAST_WEEK_MODE?(mudarSemana(-1,!0),setTimeout(A,1e3)):e.get(n.CHECKPOINT)?_():A(),"Queiroz.js 2.7.4"},name:"Queiroz.js",version:"2.7.4"}}();i.Queiroz=a}(window,view,time,util,snippet),Queiroz.bless();