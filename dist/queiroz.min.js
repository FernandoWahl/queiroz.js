
/*!
 * Queiroz.js 2.7.6
 * JavaScript Extension for Dimep Kairos
 * https://github.com/viniciusknob/queiroz.js
 */

!function(e){var i={DIV:"div",P:"p",SPAN:"span",STRONG:"strong"},t=function(){var e=function(e,i,t){var n=document.createElement(e);if(i&&(n.className=i),t){var a=document.createTextNode(t);n.appendChild(a)}return n},t=function(t,n){var a=e(i.SPAN,"qz-box qz-box-muted",t),r=e(i.STRONG,"qz-text-primary",n);return a.appendChild(r),a};return{STYLE:"<style>strong{font-weight:bold;}.ContentTable {margin-top:inherit;}.emptySlot,.FilledSlot,.LastSlot {height:inherit;padding:5px;}.FilledSlot span {margin:inherit!important;}.qz-text-primary {color:brown;}.qz-text-secondary {color:darkgoldenrod;}.qz-box {padding:5px 10px;margin:5px 1px;border:darkgrey 1px solid;}.qz-box-head {float:right;padding:10px 0;}.qz-box-muted {background-color:lightgray;}.qz-box .qz-box-content {vertical-align:middle;}.help-text {font-size:10px;}</style>",header:function(){return e(i.P,"qz-box-head")},headerLastWeekModeOn:function(){return t("","SEMANA ANTERIOR")},headerLaborTime:function(e){return t("Total: ",e)},headerTodayMissingTime:function(e){return t("Faltam/Hoje: ",e)},headerWeekMissingTime:function(e){return t("Faltam/Semana: ",e)},headerExtraTime:function(e){return t("Extra: ",e)},headerWeekTimeToLeave:function(e){return t("Saída: ",e)},laborTimePerDay:function(t){var n=e(i.DIV,"help-text","Efetuado"),a=e(i.STRONG,"qz-box-content qz-text-primary",t),r=e(i.DIV,"qz-box qz-box-muted");return r.appendChild(n),r.appendChild(a),r},laborTimePerShift:function(t,n){var a=e(i.DIV,"qz-box qz-box-muted"),r=e(i.STRONG,"qz-box-content",t);if(!n){var o=e(i.DIV,"help-text","Trabalhando...");a.appendChild(o),r.classList.add("qz-text-secondary")}return a.appendChild(r),a},todayTimeToLeave:function(t){var n=e(i.DIV,"help-text","Saída/Fim"),a=e(i.STRONG,"qz-box-content qz-text-primary",t),r=e(i.DIV,"qz-box qz-box-muted");return r.appendChild(n),r.appendChild(a),r}}}();e.snippet=t}(window),function(e){var i=function(){return{append:function(e,i){var t=this;t.asyncReflow(function(){var n=t.get(e),a=document.createElement("div");"string"==typeof i?a.innerHTML=i:a.appendChild(i),n.appendChild(a)})},asyncReflow:function(e){setTimeout(e,25)},get:function(e,i){return(i||document).querySelector(e)},getAll:function(e,i){return(i||document).querySelectorAll(e)}}}();e.view=i}(window),function(e){var i=function(){var e={SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6},i=function(e){return e<10?"0"+e:e},t=function(){return{toMillis:function(e){return e*a.IN_HOUR}}}(),n=function(){return{toMillis:function(e){return e*a.IN_MINUTE}}}(),a=function(){return{IN_MINUTE:6e4,IN_HOUR:36e5,diff:function(e,i){return e instanceof Date&&i instanceof Date?i.getTime()-e.getTime():i-e},toHumanTime:function(e){var t=parseInt(e/36e5),n=parseInt(e/6e4%60);return i(t)+":"+i(n)}}}();return{Hour:t,Minute:n,Millis:a,Weekday:e,dateToHumanTime:function(e){return i(e.getHours())+":"+i(e.getMinutes())},isToday:function(e){var i=new Date;return e.getDate()===i.getDate()&&e.getMonth()===i.getMonth()&&e.getFullYear()===i.getFullYear()},toDate:function(e){var i=e.split(" "),t=i[0].split("_"),n=i[1].split(":");return new Date(t[2],t[1]-1,t[0],n[0],n[1])}}}();e.time=i}(window),function(e){var i=function(){return{textFormat:function(e,i){for(var t=0;t<i.length;t++){var n=new RegExp("\\{"+t+"\\}","g");e=e.replace(n,i[t])}return e}}}();e.util=i}(window),function(e,i,t,n,a){var r=function(){var e={INITIAL_WEEKDAY:t.Weekday.MONDAY,LAST_WEEK_MODE:!1,MAX_CONSECUTIVE_HOURS_PER_DAY:6,MAX_HOURS_PER_WEEK:44,MAX_MINUTES_PER_DAY:528,TAMPERMONKEY_DELAY_MILLIS:1e3},n={COLUMN_DAY:".DiaApontamento",CHECKPOINT:".FilledSlot span",DATE:"[id^=hiddenDiaApont]",HEADER:"#SemanaApontamentos div",TIME_IN:".TimeIN,.TimeINVisualizacao"},r=function(){return t.Hour.toMillis(e.MAX_HOURS_PER_WEEK)},o=function(){return t.Hour.toMillis(e.MAX_CONSECUTIVE_HOURS_PER_DAY)},m=function(){return t.Minute.toMillis(e.MAX_MINUTES_PER_DAY)},l={week:{laborTime:{millis:0,human:"",html:""},missingTime:{millis:0,human:"",html:""},extraTime:{millis:0,human:"",html:""},_computeMissingTimeInMillis:function(){return r()-this.laborTime.millis},_computeExtraTimeInMillis:function(){return this.laborTime.millis-r()},buildTime:function(){this.missingTime.millis=this._computeMissingTimeInMillis(),this.extraTime.millis=this._computeExtraTimeInMillis()},buildHumanTime:function(){this.laborTime.human=t.Millis.toHumanTime(this.laborTime.millis),this.missingTime.human=t.Millis.toHumanTime(this.missingTime.millis>0?this.missingTime.millis:0),this.extraTime.human=t.Millis.toHumanTime(this.extraTime.millis>0?this.extraTime.millis:0)},buildHtmlTime:function(){this.laborTime.html=a.headerLaborTime(this.laborTime.human),this.missingTime.html=a.headerWeekMissingTime(this.missingTime.human),this.extraTime.html=a.headerExtraTime(this.extraTime.human)}},today:{laborTime:{millis:0},missingTime:{millis:0,human:"",html:""},_computeMissingTimeInMillis:function(){return m()-this.laborTime.millis},buildTime:function(){this.missingTime.millis=this._computeMissingTimeInMillis()},buildHumanTime:function(){this.missingTime.human=t.Millis.toHumanTime(this.missingTime.millis>0?this.missingTime.millis:0)},buildHtmlTime:function(){this.missingTime.html=a.headerTodayMissingTime(this.missingTime.human)}}},u="",s=function(e){return i.getAll(n.CHECKPOINT,e)},T=function(e){return i.get(n.DATE,e).value},d=function(){if(l.week.missingTime.millis<=0)return"";if(l.week.missingTime.millis>m())return"";var e="";if(u){var i=u.getTime()+l.week.missingTime.millis;if(!i||i<(new Date).getTime())return"";var n=t.dateToHumanTime(new Date(i));e=a.headerWeekTimeToLeave(n)}return e},c=function(){return l.week.missingTime.millis>=0?l.week.missingTime.html:l.week.extraTime.html},h=function(e){var i=a.header();return e.forEach(function(e){e&&i.appendChild(e)}),i},f=function(){l.week.buildHumanTime(),l.week.buildHtmlTime(),l.today.buildHumanTime(),l.today.buildHtmlTime();var t=e.LAST_WEEK_MODE?a.headerLastWeekModeOn():"",r=c(),o=d(),m=[t,l.week.laborTime.html,l.today.missingTime.html,r,o],u=h(m);i.append(n.HEADER,u)},E=function(){"ON"===e.LAST_WEEK_MODE&&(e.LAST_WEEK_MODE="DOING"),l.week.buildTime(),l.today.buildTime(),"DOING"!==e.LAST_WEEK_MODE&&f()},p=function(e,i,n){var r=t.Millis.toHumanTime(i),o=a.laborTimePerShift(r,n);document.createElement("div").appendChild(o);var m=e.parentNode;m.parentNode.insertBefore(o,m.nextSibling)},g=function(e,i){var n=t.Millis.toHumanTime(i);e.appendChild(a.laborTimePerDay(n))},M=function(e,i){var n=i+(m()-l.today.laborTime.millis),r=t.dateToHumanTime(new Date(n)),o=a.todayTimeToLeave(r),u=e.parentNode;u.parentNode.insertBefore(o,u.nextSibling)},D=function(a){var r=s(a);if(r.length){var m=0;i.getAll(n.TIME_IN,a).forEach(function(i,n){var s=i.textContent,d=t.toDate(T(a)+" "+s),c=r[2*n+1];if(c&&!c.parentElement.classList.contains("LastSlot")){var h=c.textContent,f=t.toDate(T(a)+" "+h),E=t.Millis.diff(d,f);m+=E,"DOING"!==e.LAST_WEEK_MODE&&p(c,E,!0),t.isToday(d)&&(l.today.laborTime.millis+=E)}else{u=d,t.isToday(d)&&M(i,d.getTime());var g=t.Millis.diff(d,new Date);g<o()&&p(i,m+g,!1)}}),l.week.laborTime.millis+=m,g(a,m)}},_=function(){var a=[],r=!1;return i.getAll(n.COLUMN_DAY).forEach(function(i){var n=T(i)+" 12:34",o=t.toDate(n);0===l.week.laborTime.millis?(r||(r=o.getDay()===e.INITIAL_WEEKDAY))&&a.push(i):o.getDay()===e.INITIAL_WEEKDAY?e.LAST_WEEK_MODE="DONE":"DOING"===e.LAST_WEEK_MODE&&a.push(i)}),a},b=function(){i.append("head",a.STYLE),_().forEach(D),E(),"DOING"===e.LAST_WEEK_MODE&&(mudarSemana(1,!0),setTimeout(A,1e3))},A=function(){var t=setInterval(function(){i.get(n.CHECKPOINT)&&(clearInterval(t),b())},e.TAMPERMONKEY_DELAY_MILLIS)};return{bless:function(t){return e.LAST_WEEK_MODE=!!t&&"ON","ON"===e.LAST_WEEK_MODE?(mudarSemana(-1,!0),setTimeout(A,1e3)):i.get(n.CHECKPOINT)?b():A(),"Queiroz.js 2.7.6"},name:"Queiroz.js",version:"2.7.6"}}();e.Queiroz=r}(window,view,time,util,snippet),Queiroz.bless();