var View=function(){return{append:function(t,e){var n=this;n.asyncReflow(function(){var i=n.get(t),r=document.createElement("div");r.innerHTML=e,i.appendChild(r)})},asyncReflow:function(t){setTimeout(t,25)},get:function(t,e){return(e||document).querySelector(t)},getAll:function(t,e){return(e||document).querySelectorAll(t)}}}(),Time=function(){var t={SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6},e=function(){return{toMillis:function(t){return t*i.In.HOUR}}}(),n=function(){return{toMillis:function(t){return t*i.In.MINUTE}}}(),i=function(){return{diff:function(t,e){return t instanceof Date&&e instanceof Date?e.getTime()-t.getTime():e-t},In:{MINUTE:6e4,HOUR:36e5}}}();return{Hour:e,Minute:n,Millis:i,Weekday:t,toDate:function(t){var e=t.split(" "),n=e[0].split("_"),i=e[1].split(":");return new Date(n[2],n[1]-1,n[0],i[0],i[1])}}}(),Util=function(){return{TextFormatter:function(){return{format:function(t,e){for(var n=0;n<e.length;n++){var i=new RegExp("\\{"+n+"\\}","g");t=t.replace(i,e[n])}return t}}}(),TimeFormatter:function(t){var e=function(t){return t<10?"0"+t:t};return{dateToHumanTime:function(t){return e(t.getHours())+":"+e(t.getMinutes())},millisToHumanTime:function(n){var i=parseInt(n/t.Millis.In.HOUR),r=parseInt(n/t.Millis.In.MINUTE%60);return e(i)+":"+e(r)}}}(Time)}}(),Queiroz=function(){var t={INITIAL_WEEKDAY:Time.Weekday.MONDAY,LAST_WEEK_MODE:!1,MAX_HOURS_PER_DAY:6,MAX_HOURS_PER_WEEK:44,NORMAL_MINUTES_PER_DAY:528,TAMPERMONKEY_DELAY_MILLIS:1e3},e={COLUMN_DAY:".DiaApontamento",CHECKPOINT:".FilledSlot span",DATE:"[id^=hiddenDiaApont]",HEADER:"#SemanaApontamentos div",TIME_IN:".TimeIN,.TimeINVisualizacao"},n={HEADER:'<p class="floatRight" style="padding: 10px; background-color: lightgray;">{0}{1}{2}{3}</p>',HEADER_LAST_WEEK_MODE_ON:'<span class="bold" style="color: green;">SEMANA ANTERIOR</span>  |  ',HEADER_LABOR_TIME:'Total: <span class="bold" style="color: brown;">{0}</span>',HEADER_MISSING_TIME:'  |  Faltam: <span class="bold" style="color: brown;">{0}</span>',HEADER_EXTRA_TIME:'  |  Extra: <span class="bold" style="color: brown;">{0}</span>',HEADER_TIME_TO_LEAVE:'  |  Sa√≠da/Fim: <span class="bold" style="color: brown;">{0}</span>',LABOR_TIME_PER_DAY:'<div class="FilledSlot" style="background-color: lightgray; padding-top: 5px; margin-bottom: 10px;"><span class="bold" style="margin-left: 6px; color: brown; vertical-align: middle;">= {0}</span></div>',LABOR_TIME_PER_SHIFT:'<div class="FilledSlot" style="background-color: lightgray; padding-top: 5px; margin-bottom: 10px;"><span class="bold" style="margin-left: 6px; vertical-align: middle;">{0}</span></div>'},i=0,r="",o=function(){return t.MAX_HOURS_PER_WEEK*Time.Millis.In.HOUR},a=function(){return o()-i},l=function(){return i-o()},E=function(t){return View.getAll(e.CHECKPOINT,t)},u=function(t){return View.get(e.DATE,t).value},T=function(){return Time.Hour.toMillis(t.MAX_HOURS_PER_DAY)},m=function(){return Time.Minute.toMillis(t.NORMAL_MINUTES_PER_DAY)},s=function(t){if(t<=0)return"";if(t>m())return"";var e="";if(r){var i=r.getTime()+t;if(!i||i<(new Date).getTime())return"";var o=Util.TimeFormatter.dateToHumanTime(new Date(i));e=Util.TextFormatter.format(n.HEADER_TIME_TO_LEAVE,[o])}return e},_=function(i,r,o,a){var l=t.LAST_WEEK_MODE?n.HEADER_LAST_WEEK_MODE_ON:"",E=Util.TextFormatter.format(n.HEADER_LABOR_TIME,[r]),u=Util.TextFormatter.format(n.HEADER_MISSING_TIME,[o]),T=Util.TextFormatter.format(n.HEADER_EXTRA_TIME,[a]),m=s(i),_=[l,E,i>=0?u:T,m],c=Util.TextFormatter.format(n.HEADER,_);View.append(e.HEADER,c)},c=function(){"ON"===t.LAST_WEEK_MODE&&(t.LAST_WEEK_MODE="DOING");var e=a(),n=l(),r=Util.TimeFormatter.millisToHumanTime(i),o=Util.TimeFormatter.millisToHumanTime(e>0?e:0),E=Util.TimeFormatter.millisToHumanTime(n>0?n:0);"DOING"!==t.LAST_WEEK_MODE&&_(e,r,o,E)},A=function(t,e){var i=Util.TimeFormatter.millisToHumanTime(e),r=Util.TextFormatter.format(n.LABOR_TIME_PER_SHIFT,[i]),o=document.createElement("div");o.innerHTML=r;var a=t.parentNode;return a.parentNode.insertBefore(o,a.nextSibling),o},f=function(t,e){var i=Util.TimeFormatter.millisToHumanTime(e);t.innerHTML+=Util.TextFormatter.format(n.LABOR_TIME_PER_DAY,[i])},D=function(n){var o=E(n);if(o.length){var a=0;View.getAll(e.TIME_IN,n).forEach(function(e,i){var l=e.textContent,E=Time.toDate(u(n)+" "+l),m=o[2*i+1];if(m&&!m.parentElement.classList.contains("LastSlot")){var s=m.textContent,_=Time.toDate(u(n)+" "+s),c=Time.Millis.diff(E,_);a+=c,"DOING"!==t.LAST_WEEK_MODE&&A(m,c)}else{r=E;var f=Time.Millis.diff(E,new Date);if(f<T()){var D=A(e,c=a+f),M=D.querySelector("span");D.style.color="darkgoldenrod",M.textContent="~ "+M.textContent}}}),f(n,a),i+=a}},M=function(){var n=[],r=!1;return View.getAll(e.COLUMN_DAY).forEach(function(e){var o=u(e)+" 12:34",a=Time.toDate(o);0===i?(r||(r=a.getDay()===t.INITIAL_WEEKDAY))&&n.push(e):a.getDay()===t.INITIAL_WEEKDAY?t.LAST_WEEK_MODE="DONE":"DOING"===t.LAST_WEEK_MODE&&n.push(e)}),n},I=function(){M().forEach(D),c(),"DOING"===t.LAST_WEEK_MODE&&(mudarSemana(1,!0),setTimeout(d,1e3))},d=function(){var n=setInterval(function(){View.get(e.CHECKPOINT)&&(clearInterval(n),I())},t.TAMPERMONKEY_DELAY_MILLIS)};return{bless:function(n){return t.LAST_WEEK_MODE=!!n&&"ON","ON"===t.LAST_WEEK_MODE?(mudarSemana(-1,!0),setTimeout(d,1e3)):View.get(e.CHECKPOINT)?I():d(),"Queiroz.js 2.6.2"},name:"Queiroz.js",version:"2.6.2"}}();Queiroz.bless();