var Util=function(){var t=function(){return{format:function(t,e){for(var n=0;n<e.length;n++){var i=new RegExp("\\{"+n+"\\}","g");t=t.replace(i,e[n])}return t}}}(),e=function(){var t={SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6},e=function(){return{toMillis:function(t){return t*i.In.HOUR}}}(),n=function(){return{toMillis:function(t){return t*i.In.MINUTE}}}(),i=function(){return{diff:function(t,e){return t instanceof Date&&e instanceof Date?e.getTime()-t.getTime():e-t},In:{MINUTE:6e4,HOUR:36e5}}}();return{Hour:e,Minute:n,Millis:i,Weekday:t,toDate:function(t){var e=t.split(" "),n=e[0].split("_"),i=e[1].split(":");return new Date(n[2],n[1]-1,n[0],i[0],i[1])}}}();return{TextFormatter:t,Time:e,TimeFormatter:function(t){var e=function(t){return t<10?"0"+t:t};return{dateToHumanTime:function(t){return e(t.getHours())+":"+e(t.getMinutes())},millisToHumanTime:function(n){var i=parseInt(n/t.Millis.In.HOUR),r=parseInt(n/t.Millis.In.MINUTE%60);return e(i)+":"+e(r)}}}(e),View:function(){return{append:function(t,e){var n=this;n.asyncReflow(function(){var i=n.get(t),r=document.createElement("div");r.innerHTML=e,i.appendChild(r)})},asyncReflow:function(t){setTimeout(t,25)},get:function(t,e){return(e||document).querySelector(t)},getAll:function(t,e){return(e||document).querySelectorAll(t)}}}()}}(),Queiroz=function(){var t={INITIAL_WEEKDAY:Util.Time.Weekday.MONDAY,LAST_WEEK_MODE:!1,MAX_HOURS_PER_DAY:6,MAX_HOURS_PER_WEEK:44,NORMAL_MINUTES_PER_DAY:528,TAMPERMONKEY_DELAY_MILLIS:1e3},e={COLUMN_DAY:".DiaApontamento",CHECKPOINT:".FilledSlot span",DATE:"[id^=hiddenDiaApont]",HEADER:"#SemanaApontamentos div",TIME_IN:".TimeIN,.TimeINVisualizacao"},n={HEADER:'<p class="floatRight" style="padding: 10px; background-color: lightgray;">{0}{1}{2}{3}</p>',HEADER_LAST_WEEK_MODE_ON:'<span class="bold" style="color: green;">SEMANA ANTERIOR</span>  |  ',HEADER_LABOR_TIME:'Total: <span class="bold" style="color: brown;">{0}</span>',HEADER_MISSING_TIME:'  |  Faltam: <span class="bold" style="color: brown;">{0}</span>',HEADER_TIME_TO_LEAVE:'  |  Sa√≠da/Fim: <span class="bold" style="color: brown;">{0}</span>',LABOR_TIME_PER_DAY:'<div class="FilledSlot" style="background-color: lightgray; padding-top: 5px; margin-bottom: 10px;"><span class="bold" style="margin-left: 6px; color: brown; vertical-align: middle;">= {0}</span></div>',LABOR_TIME_PER_SHIFT:'<div class="FilledSlot" style="background-color: lightgray; padding-top: 5px; margin-bottom: 10px;"><span class="bold" style="margin-left: 6px; vertical-align: middle;">{0}</span></div>'},i=0,r="",o=function(){return t.MAX_HOURS_PER_WEEK*Util.Time.Millis.In.HOUR},a=function(){return o()-i},l=function(t){return Util.View.getAll(e.CHECKPOINT,t)},E=function(t){return Util.View.get(e.DATE,t).value},u=function(){return Util.Time.Hour.toMillis(t.MAX_HOURS_PER_DAY)},T=function(){return Util.Time.Minute.toMillis(t.NORMAL_MINUTES_PER_DAY)},s=function(t){if(t<=0)return"";if(t>T())return"";var e="";if(r){var i=r.getTime()+t;if(!i||i<(new Date).getTime())return"";var o=Util.TimeFormatter.dateToHumanTime(new Date(i));e=Util.TextFormatter.format(n.HEADER_TIME_TO_LEAVE,[o])}return e},m=function(i,r,o){var a=[t.LAST_WEEK_MODE?n.HEADER_LAST_WEEK_MODE_ON:"",Util.TextFormatter.format(n.HEADER_LABOR_TIME,[r]),Util.TextFormatter.format(n.HEADER_MISSING_TIME,[o]),s(i)],l=Util.TextFormatter.format(n.HEADER,a);Util.View.append(e.HEADER,l)},_=function(){"ON"===t.LAST_WEEK_MODE&&(t.LAST_WEEK_MODE="DOING");var e=a(),n=Util.TimeFormatter.millisToHumanTime(i),r=Util.TimeFormatter.millisToHumanTime(e>0?e:0);"DOING"!==t.LAST_WEEK_MODE&&m(e,n,r)},c=function(t,e){var i=Util.TimeFormatter.millisToHumanTime(e),r=Util.TextFormatter.format(n.LABOR_TIME_PER_SHIFT,[i]),o=document.createElement("div");o.innerHTML=r;var a=t.parentNode;return a.parentNode.insertBefore(o,a.nextSibling),o},A=function(t,e){var i=Util.TimeFormatter.millisToHumanTime(e);t.innerHTML+=Util.TextFormatter.format(n.LABOR_TIME_PER_DAY,[i])},f=function(n){var o=l(n);if(o.length){var a=0;Util.View.getAll(e.TIME_IN,n).forEach(function(e,i){var l=e.textContent,T=Util.Time.toDate(E(n)+" "+l),s=o[2*i+1];if(s&&!s.parentElement.classList.contains("LastSlot")){var m=s.textContent,_=Util.Time.toDate(E(n)+" "+m),A=Util.Time.Millis.diff(T,_);a+=A,"DOING"!==t.LAST_WEEK_MODE&&c(s,A)}else{r=T;var f=Util.Time.Millis.diff(T,new Date);if(f<u()){var D=c(e,A=a+f),M=D.querySelector("span");D.style.color="darkgoldenrod",M.textContent="~ "+M.textContent}}}),A(n,a),i+=a}},D=function(){var n=[],r=!1;return Util.View.getAll(e.COLUMN_DAY).forEach(function(e){var o=E(e)+" 12:34",a=Util.Time.toDate(o);0===i?(r||(r=a.getDay()===t.INITIAL_WEEKDAY))&&n.push(e):a.getDay()===t.INITIAL_WEEKDAY?t.LAST_WEEK_MODE="DONE":"DOING"===t.LAST_WEEK_MODE&&n.push(e)}),n},M=function(){D().forEach(f),_(),"DOING"===t.LAST_WEEK_MODE&&(mudarSemana(1,!0),setTimeout(I,1e3))},I=function(){var n=setInterval(function(){Util.View.get(e.CHECKPOINT)&&(clearInterval(n),M())},t.TAMPERMONKEY_DELAY_MILLIS)};return{bless:function(n){return t.LAST_WEEK_MODE=!!n&&"ON","ON"===t.LAST_WEEK_MODE?(mudarSemana(-1,!0),setTimeout(I,1e3)):Util.View.get(e.CHECKPOINT)?M():I(),"Queiroz.js 2.5.0"},name:"Queiroz.js",version:"2.5.0"}}();Queiroz.bless();