
/*!
 * Queiroz.js 2.8.14
 * JavaScript Extension for Dimep Kairos
 * https://github.com/viniciusknob/queiroz.js
 */

!function(e){var n={name:"Queiroz.js",version:"2.8.14",description:"Queiroz.js 2.8.14",module:{}};e.Queiroz=n}(window),function(e,n){var i=function(){return{backWeek:function(){e.mudarSemana(-1,!0)},nextWeek:function(){e.mudarSemana(1,!0)}}}();n.module.kairos=i}(window,Queiroz),function(e,n){var i=function(e){return i._[e]};i._=n,e.module.strings=i}(Queiroz,{hLastWeek:"SEMANA PASSADA",hLabor:"Efetuado: ",hBalance:"Saldo: ",hPending:"Pendente: ",hExtra:"Extra: ",hExit:"Saída: ",balance:"Saldo",labor:"Efetuado",working:"Trabalhando...",exit:"Saída"}),function(e){var n={CSS:"strong{font-weight:700}#SemanaApontamentos{cursor:default!important}.ContentTable{margin-top:inherit}.FilledSlot,.LastSlot,.emptySlot{height:inherit;padding:5px}.FilledSlot span{margin:inherit!important}.qz-text-primary{color:brown}.qz-text-golden{color:#b8860b}.qz-text-green{color:green}.qz-text-teal{color:teal}.qz-box{padding:5px 10px;margin:5px 1px;border:#a9a9a9 1px solid}.qz-box-head{float:right;padding:10px 0}.qz-box-muted{background-color:#d3d3d3}.qz-box .qz-box-content{vertical-align:middle}.qz-help-text{font-size:10px}"};e.module.style=n}(Queiroz),function(e){var n=e.module.strings,i=e.module.style,t={DIV:"div",P:"p",SPAN:"span",STYLE:"style",STRONG:"strong"},a=function(){var e=function(e,n,i){var t=document.createElement(e);if(n&&(t.className=n),i){var a=document.createTextNode(i);t.appendChild(a)}return t},a=function(n,i,a){var r=e(t.SPAN,"qz-box qz-box-muted",n),o=e(t.STRONG,a,i);return r.appendChild(o),r};return{style:function(){return e(t.STYLE,"",i.CSS)},header:function(){return e(t.P,"qz-box-head")},headerLastWeekModeOn:function(){return a("",n("hLastWeek"),"qz-text-primary")},headerLaborTime:function(e){return a(n("hLabor"),e,"qz-text-green")},headerBalanceTime:function(e){return a(n("hBalance"),e,"qz-text-teal")},headerWeekPendingTime:function(e){return a(n("hPending"),e,"qz-text-primary")},headerExtraTime:function(e){return a(n("hExtra"),e,"qz-text-green")},headerWeekTimeToLeave:function(e){return a(n("hExit"),e,"qz-text-primary")},balanceTimePerDay:function(i){var a=e(t.DIV,"qz-help-text",n("balance")),r=e(t.STRONG,"qz-box-content qz-text-teal",i),o=e(t.DIV,"qz-box qz-box-muted");return o.appendChild(a),o.appendChild(r),o},laborTimePerDay:function(i){var a=e(t.DIV,"qz-help-text",n("labor")),r=e(t.STRONG,"qz-box-content qz-text-green",i),o=e(t.DIV,"qz-box qz-box-muted");return o.appendChild(a),o.appendChild(r),o},laborTimePerShift:function(i,a){var r=e(t.DIV,"qz-box qz-box-muted"),o=e(t.STRONG,"qz-box-content",i);if(!a){var l=e(t.DIV,"qz-help-text",n("working"));r.appendChild(l),o.classList.add("qz-text-golden")}return r.appendChild(o),r},todayTimeToLeave:function(i){var a=e(t.DIV,"qz-help-text",n("exit")),r=e(t.STRONG,"qz-box-content qz-text-primary",i),o=e(t.DIV,"qz-box qz-box-muted");return o.appendChild(a),o.appendChild(r),o}}}();e.module.snippet=a}(Queiroz),function(e,n){var i=function(){var n={HEAD:"head",COLUMN_DAY:".DiaApontamento",CHECKPOINT:".FilledSlot span",DATE:"[id^=hiddenDiaApont]",HEADER:"#SemanaApontamentos div",TIME_IN:".TimeIN,.TimeINVisualizacao",FOOTER:"footer .LabelEmpresa"},i=function(e){setTimeout(e,25)},t=function(n,i){return(i||e).querySelector(n)},a=function(n,i){return(i||e).querySelectorAll(n)},r=function(n,a){i(function(){var i=t(n),r=e.createElement("div");"string"==typeof a?r.innerHTML=a:r.appendChild(a),i.appendChild(r)})};return{isLoaded:function(){return t(n.CHECKPOINT)},getAllColumnDay:function(){return a(n.COLUMN_DAY)},getAllCheckpoint:function(e){return a(n.CHECKPOINT,e)},getDateFromTargetAsString:function(e){return t(n.DATE,e).value},getAllTimeIn:function(e){return a(n.TIME_IN,e)},appendToHead:function(e){r(n.HEAD,e)},appendToHeader:function(e){r(n.HEADER,e)},appendToFooter:function(e){t(n.FOOTER).textContent+=" | "+e}}}();n.module.view=i}(document,Queiroz),function(e){var n=function(){var e=function(e){return e<10?"0"+e:e};return{zero:"00:00",fake:"12:34",dateToHuman:function(n){return e(n.getHours())+":"+e(n.getMinutes())},millisToHuman:function(n){var i=parseInt(n/36e5),t=parseInt(n/6e4%60);return e(i)+":"+e(t)},diff:function(e,n){return e instanceof Date&&n instanceof Date?n.getTime()-e.getTime():n-e},hourToMillis:function(e){return 36e5*e},minuteToMillis:function(e){return 6e4*e},isToday:function(e){var n=new Date;return e.getDate()===n.getDate()&&e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()},toDate:function(e){var n=e.split(" "),i=n[0].split("_"),t=n[1].split(":");return new Date(i[2],i[1]-1,i[0],t[0],t[1])},Weekday:{SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6}}}();e.module.time=n}(Queiroz),function(e){var n=function(){return{textFormat:function(e,n){for(var i=0;i<n.length;i++){var t=new RegExp("\\{"+i+"\\}","g");e=e.replace(t,n[i])}return e}}}();e.module.util=n}(Queiroz),function(e){var n=e.module,i=n.kairos,t=n.view,a=n.time,r=(n.util,n.snippet),o={INITIAL_WEEKDAY:a.Weekday.MONDAY,LAST_WEEK_MODE:!1,MAX_CONSECUTIVE_HOURS_PER_DAY:6,MAX_HOURS_PER_WEEK:44,MAX_MINUTES_PER_DAY:528,USERSCRIPT_DELAY_MILLIS:1e3},l=function(){return a.hourToMillis(o.MAX_HOURS_PER_WEEK)},u=function(){return a.hourToMillis(o.MAX_CONSECUTIVE_HOURS_PER_DAY)},m=function(){return a.minuteToMillis(o.MAX_MINUTES_PER_DAY)},d={week:{laborTime:{millis:0,human:"",html:""},balanceTime:{millis:0,human:"",html:""},pendingTime:{millis:0,human:"",html:""},extraTime:{millis:0,human:"",html:""},_computePendingTimeInMillis:function(){return l()-this.laborTime.millis},_computeExtraTimeInMillis:function(){return this.laborTime.millis-l()},_buildHumanBalanceTime:function(){var e=this.balanceTime.millis;return 0==e?a.zero:e>0?"+"+a.millisToHuman(e):e<0?"-"+a.millisToHuman(-1*e):void 0},buildTime:function(){this.pendingTime.millis=this._computePendingTimeInMillis(),this.extraTime.millis=this._computeExtraTimeInMillis()},buildHumanTime:function(){this.laborTime.human=a.millisToHuman(this.laborTime.millis),this.balanceTime.human=this._buildHumanBalanceTime(),this.pendingTime.human=a.millisToHuman(this.pendingTime.millis>0?this.pendingTime.millis:0),this.extraTime.human=a.millisToHuman(this.extraTime.millis>0?this.extraTime.millis:0)},buildHtmlTime:function(){this.laborTime.html=r.headerLaborTime(this.laborTime.human),this.balanceTime.html=r.headerBalanceTime(this.balanceTime.human),this.pendingTime.html=r.headerWeekPendingTime(this.pendingTime.human),this.extraTime.html=r.headerExtraTime(this.extraTime.human)}},today:{laborTime:{millis:0}}},T="",s=function(e){return t.getAllCheckpoint(e)},c=function(e){return t.getDateFromTargetAsString(e)},h=function(){if(d.week.pendingTime.millis<=0)return"";if(d.week.pendingTime.millis>m())return"";var e="";if(T){var n=T.getTime()+d.week.pendingTime.millis;if(!n||n<(new Date).getTime())return"";var i=a.dateToHuman(new Date(n));e=r.headerWeekTimeToLeave(i)}return e},f=function(){return d.week.pendingTime.millis>=0?d.week.pendingTime.html:d.week.extraTime.html},p=function(e){var n=r.header();return e.forEach(function(e){e&&n.appendChild(e)}),n},E=function(){d.week.buildHumanTime(),d.week.buildHtmlTime();var e=o.LAST_WEEK_MODE?r.headerLastWeekModeOn():"",n=f(),i=h(),a=[e,d.week.laborTime.html,d.week.balanceTime.html,n,i],l=p(a);t.appendToHeader(l)},D=function(){"ON"===o.LAST_WEEK_MODE&&(o.LAST_WEEK_MODE="DOING"),d.week.buildTime(),"DOING"!==o.LAST_WEEK_MODE&&E()},b=function(e,n,i){n<0&&(n=0);var t=a.millisToHuman(n),o=r.laborTimePerShift(t,i);document.createElement("div").appendChild(o);var l=e.parentNode;l.parentNode.insertBefore(o,l.nextSibling)},g=function(e,n){var i=a.millisToHuman(n);e.appendChild(r.laborTimePerDay(i))},x=function(e,n){var i=a.isToday(a.toDate(c(e)+" "+a.fake)),t=m(),o=0,l=a.zero;n<t?(o=t-n,l="-"+a.millisToHuman(o),0==i&&(d.week.balanceTime.millis-=o)):n>t&&(o=n-t,l="+"+a.millisToHuman(o),0==i&&(d.week.balanceTime.millis+=o)),0==i&&e.appendChild(r.balanceTimePerDay(l))},_=function(e,n){var i=m()-d.today.laborTime.millis,t=n+(i<0?0:i),o=a.dateToHuman(new Date(t)),l=r.todayTimeToLeave(o),u=e.parentNode;u.parentNode.insertBefore(l,u.nextSibling)},S=function(e){var n=s(e);if(n.length){var i=0;t.getAllTimeIn(e).forEach(function(t,r){var s=t.textContent,h=a.toDate(c(e)+" "+s),f=n[2*r+1];if(f&&!f.parentElement.classList.contains("LastSlot")){var p=f.textContent,E=a.toDate(c(e)+" "+p),D=a.diff(h,E);i+=D,"DOING"!==o.LAST_WEEK_MODE&&b(f,D,!0),a.isToday(h)&&(d.today.laborTime.millis+=D)}else{T=h,a.isToday(h)&&l()-d.week.laborTime.millis>m()&&_(t,h.getTime());var g=a.diff(h,new Date);g<u()&&b(t,i+g,!1)}}),i>0&&(d.week.laborTime.millis+=i,g(e,i)),x(e,i)}},A=function(){var e=[],n=!1;return t.getAllColumnDay().forEach(function(i){var t=c(i)+" "+a.fake,r=a.toDate(t);0===d.week.laborTime.millis?(n||(n=r.getDay()===o.INITIAL_WEEKDAY))&&e.push(i):r.getDay()===o.INITIAL_WEEKDAY?o.LAST_WEEK_MODE="DONE":"DOING"===o.LAST_WEEK_MODE&&e.push(i)}),e},v=function(){t.appendToHead(r.style()),A().forEach(S),D(),"DOING"===o.LAST_WEEK_MODE&&(i.nextWeek(),setTimeout(z,1e3))},z=function(){var e=setInterval(function(){t.isLoaded()&&(clearInterval(e),v())},o.USERSCRIPT_DELAY_MILLIS)};e.bless=function(e){return o.LAST_WEEK_MODE=!!e&&"ON","ON"===o.LAST_WEEK_MODE?(i.backWeek(),setTimeout(z,1e3)):t.isLoaded()?v():z(),t.appendToFooter(this.description),this.description}}(Queiroz),Queiroz.bless();