
/*!
 * Queiroz.js 2.6.9
 * JavaScript Extension for Dimep Kairos
 * https://github.com/viniciusknob/queiroz.js
 */

!function(t){var n=function(){return{append:function(t,n){var e=this;e.asyncReflow(function(){var r=e.get(t),i=document.createElement("div");i.innerHTML=n,r.appendChild(i)})},asyncReflow:function(t){setTimeout(t,25)},get:function(t,n){return(n||document).querySelector(t)},getAll:function(t,n){return(n||document).querySelectorAll(t)}}}();t.view=n}(window),function(t){var n=function(){var t={SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6},n=function(t){return t<10?"0"+t:t},e=function(){return{toMillis:function(t){return t*i.IN_HOUR}}}(),r=function(){return{toMillis:function(t){return t*i.IN_MINUTE}}}(),i=function(){return{IN_MINUTE:6e4,IN_HOUR:36e5,diff:function(t,n){return t instanceof Date&&n instanceof Date?n.getTime()-t.getTime():n-t},toHumanTime:function(t){var e=parseInt(t/36e5),r=parseInt(t/6e4%60);return n(e)+":"+n(r)}}}();return{Hour:e,Minute:r,Millis:i,Weekday:t,toDate:function(t){var n=t.split(" "),e=n[0].split("_"),r=n[1].split(":");return new Date(e[2],e[1]-1,e[0],r[0],r[1])},dateToHumanTime:function(t){return n(t.getHours())+":"+n(t.getMinutes())}}}();t.time=n}(window),function(t){var n=function(){return{textFormat:function(t,n){for(var e=0;e<n.length;e++){var r=new RegExp("\\{"+e+"\\}","g");t=t.replace(r,n[e])}return t}}}();t.util=n}(window),function(t,n,e,r){var i=function(){var t={INITIAL_WEEKDAY:e.Weekday.MONDAY,LAST_WEEK_MODE:!1,MAX_HOURS_PER_DAY:6,MAX_HOURS_PER_WEEK:44,NORMAL_MINUTES_PER_DAY:528,TAMPERMONKEY_DELAY_MILLIS:1e3},i={COLUMN_DAY:".DiaApontamento",CHECKPOINT:".FilledSlot span",DATE:"[id^=hiddenDiaApont]",HEADER:"#SemanaApontamentos div",TIME_IN:".TimeIN,.TimeINVisualizacao"},o={HEADER:'<p class="qz-box qz-box-head qz-box-muted">{0}{1}{2}{3}</p>',HEADER_LAST_WEEK_MODE_ON:'<strong class="qz-text-primary">SEMANA ANTERIOR</strong>  |  ',HEADER_LABOR_TIME:'Total: <strong class="qz-text-primary">{0}</strong>',HEADER_MISSING_TIME:'  |  Faltam: <strong class="qz-text-primary">{0}</strong>',HEADER_EXTRA_TIME:'  |  Extra: <strong class="qz-text-primary">{0}</strong>',HEADER_TIME_TO_LEAVE:'  |  Sa√≠da/Fim: <strong class="qz-text-primary">{0}</strong>',LABOR_TIME_PER_DAY:'<div class="qz-box qz-box-muted"><strong class="qz-box-content qz-text-primary">{0}</strong></div>',LABOR_TIME_PER_SHIFT:'<div class="qz-box qz-box-muted"><strong class="qz-box-content">{0}</strong></div>',STYLE:"<style>strong{font-weight:bold;}.ContentTable {margin-top:inherit;}.emptySlot,.FilledSlot,.LastSlot {height:inherit;padding:5px;}.qz-text-primary {color:brown;}.qz-box {padding:7px;margin:5px 0;}.qz-box-head {float:right;}.qz-box-muted {background-color:lightgray;}.qz-box .qz-box-content {margin-left:6px; vertical-align:middle;}</style>"},a=0,E="",u=function(){return t.MAX_HOURS_PER_WEEK*e.Millis.IN_HOUR},l=function(){return u()-a},_=function(){return a-u()},s=function(t){return n.getAll(i.CHECKPOINT,t)},c=function(t){return n.get(i.DATE,t).value},A=function(){return e.Hour.toMillis(t.MAX_HOURS_PER_DAY)},T=function(){return e.Minute.toMillis(t.NORMAL_MINUTES_PER_DAY)},D=function(t){if(t<=0)return"";if(t>T())return"";var n="";if(E){var i=E.getTime()+t;if(!i||i<(new Date).getTime())return"";var a=e.dateToHumanTime(new Date(i));n=r.textFormat(o.HEADER_TIME_TO_LEAVE,[a])}return n},f=function(e,a,E,u){var l=t.LAST_WEEK_MODE?o.HEADER_LAST_WEEK_MODE_ON:"",_=r.textFormat(o.HEADER_LABOR_TIME,[a]),s=r.textFormat(o.HEADER_MISSING_TIME,[E]),c=r.textFormat(o.HEADER_EXTRA_TIME,[u]),A=D(e),T=[l,_,e>=0?s:c,A],f=r.textFormat(o.HEADER,T);n.append(i.HEADER,f)},M=function(){"ON"===t.LAST_WEEK_MODE&&(t.LAST_WEEK_MODE="DOING");var n=l(),r=_(),i=e.Millis.toHumanTime(a),o=e.Millis.toHumanTime(n>0?n:0),E=e.Millis.toHumanTime(r>0?r:0);"DOING"!==t.LAST_WEEK_MODE&&f(n,i,o,E)},m=function(t,n){var i=e.Millis.toHumanTime(n),a=r.textFormat(o.LABOR_TIME_PER_SHIFT,[i]),E=document.createElement("div");E.innerHTML=a;var u=t.parentNode;return u.parentNode.insertBefore(E,u.nextSibling),E},I=function(t,n){var i=e.Millis.toHumanTime(n);t.innerHTML+=r.textFormat(o.LABOR_TIME_PER_DAY,[i])},d=function(r){var o=s(r);if(o.length){var u=0;n.getAll(i.TIME_IN,r).forEach(function(n,i){var a=n.textContent,l=e.toDate(c(r)+" "+a),_=o[2*i+1];if(_&&!_.parentElement.classList.contains("LastSlot")){var s=_.textContent,T=e.toDate(c(r)+" "+s),D=e.Millis.diff(l,T);u+=D,"DOING"!==t.LAST_WEEK_MODE&&m(_,D)}else{E=l;var f=e.Millis.diff(l,new Date);if(f<A()){var M=m(n,D=u+f),I=M.querySelector("span");M.style.color="darkgoldenrod",I.textContent="~ "+I.textContent}}}),I(r,u),a+=u}},O=function(){var r=[],o=!1;return n.getAll(i.COLUMN_DAY).forEach(function(n){var i=c(n)+" 12:34",E=e.toDate(i);0===a?(o||(o=E.getDay()===t.INITIAL_WEEKDAY))&&r.push(n):E.getDay()===t.INITIAL_WEEKDAY?t.LAST_WEEK_MODE="DONE":"DOING"===t.LAST_WEEK_MODE&&r.push(n)}),r},R=function(){n.append("head",o.STYLE),O().forEach(d),M(),"DOING"===t.LAST_WEEK_MODE&&(mudarSemana(1,!0),setTimeout(g,1e3))},g=function(){var e=setInterval(function(){n.get(i.CHECKPOINT)&&(clearInterval(e),R())},t.TAMPERMONKEY_DELAY_MILLIS)};return{bless:function(e){return t.LAST_WEEK_MODE=!!e&&"ON","ON"===t.LAST_WEEK_MODE?(mudarSemana(-1,!0),setTimeout(g,1e3)):n.get(i.CHECKPOINT)?R():g(),"Queiroz.js 2.6.9"},name:"Queiroz.js",version:"2.6.9"}}();t.Queiroz=i}(window,view,time,util),Queiroz.bless();