var Queiroz=function(){var t=function(){var t=function(){return{format:function(t,e){for(var n=0;n<e.length;n++){var r=new RegExp("\\{"+n+"\\}","g");t=t.replace(r,e[n])}return t}}}(),e=function(){var t={SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6},e=function(){return{toMillis:function(t){return t*r.In.HOUR}}}(),n=function(){return{toMillis:function(t){return t*r.In.MINUTE}}}(),r=function(){return{diff:function(t,e){return t instanceof Date&&e instanceof Date?e.getTime()-t.getTime():e-t},In:{MINUTE:6e4,HOUR:36e5}}}();return{Hour:e,Minute:n,Millis:r,Weekday:t,toDate:function(t){var e=t.split(" "),n=e[0].split("_"),r=e[1].split(":");return new Date(n[2],n[1]-1,n[0],r[0],r[1])}}}();return{TextFormatter:t,Time:e,TimeFormatter:function(t){var e=function(t){return t<10?"0"+t:t};return{dateToHumanTime:function(t){return e(t.getHours())+":"+e(t.getMinutes())},millisToHumanTime:function(n){var r=parseInt(n/t.Millis.In.HOUR),i=parseInt(n/t.Millis.In.MINUTE%60);return e(r)+":"+e(i)}}}(e),View:function(){return{append:function(t,e){var n=this;n.asyncReflow(function(){var r=n.get(t),i=document.createElement("div");i.innerHTML=e,r.appendChild(i)})},asyncReflow:function(t){setTimeout(t,25)},get:function(t,e){return(e||document).querySelector(t)},getAll:function(t,e){return(e||document).querySelectorAll(t)}}}()}}(),e={INITIAL_WEEKDAY:t.Time.Weekday.MONDAY,LAST_WEEK_MODE:!1,MAX_HOURS_PER_DAY:6,MAX_HOURS_PER_WEEK:44,NORMAL_MINUTES_PER_DAY:528,TAMPERMONKEY_DELAY_MILLIS:1e3},n={COLUMN_DAY:".DiaApontamento",CHECKPOINT:".FilledSlot span",DATE:"[id^=hiddenDiaApont]",HEADER:"#SemanaApontamentos div",TIME_IN:".TimeIN,.TimeINVisualizacao"},r={HEADER:'<p class="floatRight" style="padding: 10px; background-color: lightgray;">{0}{1}{2}{3}</p>',HEADER_LAST_WEEK_MODE_ON:'<span class="bold" style="color: green;">SEMANA ANTERIOR</span>  |  ',HEADER_LABOR_TIME:'Total: <span class="bold" style="color: brown;">{0}</span>',HEADER_MISSING_TIME:'  |  Faltam: <span class="bold" style="color: brown;">{0}</span>',HEADER_TIME_TO_LEAVE:'  |  Sa√≠da/Fim: <span class="bold" style="color: brown;">{0}</span>',LABOR_TIME_PER_DAY:'<div class="FilledSlot" style="background-color: lightgray; padding-top: 5px; margin-bottom: 10px;"><span class="bold" style="margin-left: 6px; color: brown; vertical-align: middle;">= {0}</span></div>',LABOR_TIME_PER_SHIFT:'<div class="FilledSlot" style="background-color: lightgray; padding-top: 5px; margin-bottom: 10px;"><span class="bold" style="margin-left: 6px; vertical-align: middle;">{0}</span></div>'},i=0,o="",a=function(){return e.MAX_HOURS_PER_WEEK*t.Time.Millis.In.HOUR},E=function(){return a()-i},l=function(e){return t.View.getAll(n.CHECKPOINT,e)},u=function(e){return t.View.get(n.DATE,e).value},T=function(){return t.Time.Hour.toMillis(e.MAX_HOURS_PER_DAY)},s=function(){return t.Time.Minute.toMillis(e.NORMAL_MINUTES_PER_DAY)},m=function(e){if(e<=0)return"";if(e>s())return"";var n="";if(o){var i=o.getTime()+e;if(!i||i<(new Date).getTime())return"";var a=t.TimeFormatter.dateToHumanTime(new Date(i));n=t.TextFormatter.format(r.HEADER_TIME_TO_LEAVE,[a])}return n},_=function(i,o,a){var E=[e.LAST_WEEK_MODE?r.HEADER_LAST_WEEK_MODE_ON:"",t.TextFormatter.format(r.HEADER_LABOR_TIME,[o]),t.TextFormatter.format(r.HEADER_MISSING_TIME,[a]),m(i)],l=t.TextFormatter.format(r.HEADER,E);t.View.append(n.HEADER,l)},c=function(){"ON"===e.LAST_WEEK_MODE&&(e.LAST_WEEK_MODE="DOING");var n=E(),r=t.TimeFormatter.millisToHumanTime(i),o=t.TimeFormatter.millisToHumanTime(n>0?n:0);"DOING"!==e.LAST_WEEK_MODE&&_(n,r,o)},A=function(e,n){var i=t.TimeFormatter.millisToHumanTime(n),o=t.TextFormatter.format(r.LABOR_TIME_PER_SHIFT,[i]),a=document.createElement("div");a.innerHTML=o;var E=e.parentNode;return E.parentNode.insertBefore(a,E.nextSibling),a},f=function(e,n){var i=t.TimeFormatter.millisToHumanTime(n);e.innerHTML+=t.TextFormatter.format(r.LABOR_TIME_PER_DAY,[i])},D=function(r){var a=l(r);if(a.length){var E=0;t.View.getAll(n.TIME_IN,r).forEach(function(n,i){var l=n.textContent,s=t.Time.toDate(u(r)+" "+l),m=a[2*i+1];if(m&&!m.parentElement.classList.contains("LastSlot")){var _=m.textContent,c=t.Time.toDate(u(r)+" "+_),f=t.Time.Millis.diff(s,c);E+=f,"DOING"!==e.LAST_WEEK_MODE&&A(m,f)}else{o=s;var D=t.Time.Millis.diff(s,new Date);if(D<T()){var M=A(n,f=E+D),I=M.querySelector("span");M.style.color="darkgoldenrod",I.textContent="~ "+I.textContent}}}),f(r,E),i+=E}},M=function(){var r=[],o=!1;return t.View.getAll(n.COLUMN_DAY).forEach(function(n){var a=u(n)+" 12:34",E=t.Time.toDate(a);0===i?(o||(o=E.getDay()===e.INITIAL_WEEKDAY))&&r.push(n):E.getDay()===e.INITIAL_WEEKDAY?e.LAST_WEEK_MODE="DONE":"DOING"===e.LAST_WEEK_MODE&&r.push(n)}),r},I=function(){M().forEach(D),c(),"DOING"===e.LAST_WEEK_MODE&&(mudarSemana(1,!0),setTimeout(d,1e3))},d=function(){var r=setInterval(function(){t.View.get(n.CHECKPOINT)&&(clearInterval(r),I())},e.TAMPERMONKEY_DELAY_MILLIS)};return{bless:function(r){return e.LAST_WEEK_MODE=!!r&&"ON","ON"===e.LAST_WEEK_MODE?(mudarSemana(-1,!0),setTimeout(d,1e3)):t.View.get(n.CHECKPOINT)?I():d(),"Queiroz.js 2.4.1"},name:"Queiroz.js",version:"2.4.1"}}();Queiroz.bless();