var View=function(){return{append:function(t,e){var n=this;n.asyncReflow(function(){var i=n.get(t),r=document.createElement("div");r.innerHTML=e,i.appendChild(r)})},asyncReflow:function(t){setTimeout(t,25)},get:function(t,e){return(e||document).querySelector(t)},getAll:function(t,e){return(e||document).querySelectorAll(t)}}}(),Time=function(){var t={SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6},e=function(t){return t<10?"0"+t:t},n=function(){return{toMillis:function(t){return t*r.IN_HOUR}}}(),i=function(){return{toMillis:function(t){return t*r.IN_MINUTE}}}(),r=function(){return{IN_MINUTE:6e4,IN_HOUR:36e5,diff:function(t,e){return t instanceof Date&&e instanceof Date?e.getTime()-t.getTime():e-t},toHumanTime:function(t){var n=parseInt(t/36e5),i=parseInt(t/6e4%60);return e(n)+":"+e(i)}}}();return{Hour:n,Minute:i,Millis:r,Weekday:t,toDate:function(t){var e=t.split(" "),n=e[0].split("_"),i=e[1].split(":");return new Date(n[2],n[1]-1,n[0],i[0],i[1])},dateToHumanTime:function(t){return e(t.getHours())+":"+e(t.getMinutes())}}}(),Util=function(){return{textFormat:function(t,e){for(var n=0;n<e.length;n++){var i=new RegExp("\\{"+n+"\\}","g");t=t.replace(i,e[n])}return t}}}(),Queiroz=function(){var t={INITIAL_WEEKDAY:Time.Weekday.MONDAY,LAST_WEEK_MODE:!1,MAX_HOURS_PER_DAY:6,MAX_HOURS_PER_WEEK:44,NORMAL_MINUTES_PER_DAY:528,TAMPERMONKEY_DELAY_MILLIS:1e3},e={COLUMN_DAY:".DiaApontamento",CHECKPOINT:".FilledSlot span",DATE:"[id^=hiddenDiaApont]",HEADER:"#SemanaApontamentos div",TIME_IN:".TimeIN,.TimeINVisualizacao"},n={HEADER:'<p class="floatRight" style="padding: 10px; background-color: lightgray;">{0}{1}{2}{3}</p>',HEADER_LAST_WEEK_MODE_ON:'<span class="bold" style="color: green;">SEMANA ANTERIOR</span>  |  ',HEADER_LABOR_TIME:'Total: <span class="bold" style="color: brown;">{0}</span>',HEADER_MISSING_TIME:'  |  Faltam: <span class="bold" style="color: brown;">{0}</span>',HEADER_EXTRA_TIME:'  |  Extra: <span class="bold" style="color: brown;">{0}</span>',HEADER_TIME_TO_LEAVE:'  |  Sa√≠da/Fim: <span class="bold" style="color: brown;">{0}</span>',LABOR_TIME_PER_DAY:'<div class="FilledSlot" style="background-color: lightgray; padding-top: 5px; margin-bottom: 10px;"><span class="bold" style="margin-left: 6px; color: brown; vertical-align: middle;">= {0}</span></div>',LABOR_TIME_PER_SHIFT:'<div class="FilledSlot" style="background-color: lightgray; padding-top: 5px; margin-bottom: 10px;"><span class="bold" style="margin-left: 6px; vertical-align: middle;">{0}</span></div>'},i=0,r="",o=function(){return t.MAX_HOURS_PER_WEEK*Time.Millis.IN_HOUR},a=function(){return o()-i},E=function(){return i-o()},l=function(t){return View.getAll(e.CHECKPOINT,t)},u=function(t){return View.get(e.DATE,t).value},_=function(){return Time.Hour.toMillis(t.MAX_HOURS_PER_DAY)},s=function(){return Time.Minute.toMillis(t.NORMAL_MINUTES_PER_DAY)},T=function(t){if(t<=0)return"";if(t>s())return"";var e="";if(r){var i=r.getTime()+t;if(!i||i<(new Date).getTime())return"";var o=Time.dateToHumanTime(new Date(i));e=Util.textFormat(n.HEADER_TIME_TO_LEAVE,[o])}return e},c=function(i,r,o,a){var E=t.LAST_WEEK_MODE?n.HEADER_LAST_WEEK_MODE_ON:"",l=Util.textFormat(n.HEADER_LABOR_TIME,[r]),u=Util.textFormat(n.HEADER_MISSING_TIME,[o]),_=Util.textFormat(n.HEADER_EXTRA_TIME,[a]),s=T(i),c=[E,l,i>=0?u:_,s],A=Util.textFormat(n.HEADER,c);View.append(e.HEADER,A)},A=function(){"ON"===t.LAST_WEEK_MODE&&(t.LAST_WEEK_MODE="DOING");var e=a(),n=E(),r=Time.Millis.toHumanTime(i),o=Time.Millis.toHumanTime(e>0?e:0),l=Time.Millis.toHumanTime(n>0?n:0);"DOING"!==t.LAST_WEEK_MODE&&c(e,r,o,l)},m=function(t,e){var i=Time.Millis.toHumanTime(e),r=Util.textFormat(n.LABOR_TIME_PER_SHIFT,[i]),o=document.createElement("div");o.innerHTML=r;var a=t.parentNode;return a.parentNode.insertBefore(o,a.nextSibling),o},D=function(t,e){var i=Time.Millis.toHumanTime(e);t.innerHTML+=Util.textFormat(n.LABOR_TIME_PER_DAY,[i])},M=function(n){var o=l(n);if(o.length){var a=0;View.getAll(e.TIME_IN,n).forEach(function(e,i){var E=e.textContent,l=Time.toDate(u(n)+" "+E),s=o[2*i+1];if(s&&!s.parentElement.classList.contains("LastSlot")){var T=s.textContent,c=Time.toDate(u(n)+" "+T),A=Time.Millis.diff(l,c);a+=A,"DOING"!==t.LAST_WEEK_MODE&&m(s,A)}else{r=l;var D=Time.Millis.diff(l,new Date);if(D<_()){var M=m(e,A=a+D),f=M.querySelector("span");M.style.color="darkgoldenrod",f.textContent="~ "+f.textContent}}}),D(n,a),i+=a}},f=function(){var n=[],r=!1;return View.getAll(e.COLUMN_DAY).forEach(function(e){var o=u(e)+" 12:34",a=Time.toDate(o);0===i?(r||(r=a.getDay()===t.INITIAL_WEEKDAY))&&n.push(e):a.getDay()===t.INITIAL_WEEKDAY?t.LAST_WEEK_MODE="DONE":"DOING"===t.LAST_WEEK_MODE&&n.push(e)}),n},I=function(){f().forEach(M),A(),"DOING"===t.LAST_WEEK_MODE&&(mudarSemana(1,!0),setTimeout(d,1e3))},d=function(){var n=setInterval(function(){View.get(e.CHECKPOINT)&&(clearInterval(n),I())},t.TAMPERMONKEY_DELAY_MILLIS)};return{bless:function(n){return t.LAST_WEEK_MODE=!!n&&"ON","ON"===t.LAST_WEEK_MODE?(mudarSemana(-1,!0),setTimeout(d,1e3)):View.get(e.CHECKPOINT)?I():d(),"Queiroz.js 2.6.4"},name:"Queiroz.js",version:"2.6.4"}}();Queiroz.bless();