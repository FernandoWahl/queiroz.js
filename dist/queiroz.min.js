
/*!
 * Queiroz.js 2.9.8
 * JavaScript Extension for Dimep Kairos
 * https://github.com/viniciusknob/queiroz.js
 */

!function(e){var t={name:"Queiroz.js",version:"2.9.8",description:"Queiroz.js 2.9.8",module:{},settings:{USERSCRIPT_DELAY_MILLIS:1e3,MAX_CONSECUTIVE_HOURS_PER_DAY:6,MAX_HOURS_PER_WEEK:44,MAX_MINUTES_PER_DAY:528,INITIAL_WEEKDAY:1,LAST_WEEK_MODE:!1}};e.Queiroz=t}(window),function(e,t){var i=function(){return{backWeek:function(){e.mudarSemana(-1,!0)},nextWeek:function(){e.mudarSemana(1,!0)}}}();t.module.kairos=i}(window,Queiroz),function(e){var t=function(e){return t._[e]};t._={pending:"Pendente",extra:"Extra",balance:"Saldo",labor:"Efetuado",working:"Trabalhando...",exit:"Saída (08:48)","exit+":"Saída + Saldo"},e.module.strings=t}(Queiroz),function(e){var t={CSS:"html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figcaption,figure,main{display:block}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details,menu{display:block}summary{display:list-item}canvas{display:inline-block}template{display:none}[hidden]{display:none}#SemanaApontamentos{cursor:default!important}.ContentTable{margin-top:inherit}.FilledSlot,.LastSlot,.emptySlot{height:inherit;padding:5px}.FilledSlot span{margin:inherit!important}.qz-text-center{text-align:center}.qz-text-primary{color:brown}.qz-text-golden{color:#b8860b}.qz-text-green{color:green}.qz-text-teal{color:teal}.qz-box{padding:5px 10px;margin:5px 1px;border:#a9a9a9 1px solid;min-width:60px}.qz-box-compact{min-width:auto}.qz-box-inline{display:inline-block}.qz-box-head{float:right}.qz-box-muted{background-color:#d3d3d3}.qz-box .qz-box-content{vertical-align:middle}.qz-help-text{font-size:10px}.js-show{display:block}.js-hide{display:none}.qz-modal{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1024;background-color:rgba(0,0,0,.5)}.qz-modal-dialog{position:relative;width:900px;margin:30px auto}.qz-modal-content{position:relative;background-color:#fff;background-clip:padding-box;border-radius:5px}.qz-modal-header{padding:10px;border-bottom:1px solid #d3d3d3;font-weight:700;font-size:16px}.qz-modal-close{float:right;cursor:pointer;background:0 0;border:0;padding:0;color:silver}.qz-modal-body{padding:10px}.qz-modal-footer{padding:10px;border-top:1px solid #d3d3d3;text-align:center}"};e.module.style=t}(Queiroz),function(e,t){var i=t.module.strings,n=t.module.style,o={DIV:"div",P:"p",SPAN:"span",STYLE:"style",STRONG:"strong",BUTTON:"button",SMALL:"small",TABLE:"table",THEAD:"thead",TBODY:"tbody",TH:"th",TR:"tr",TD:"td"},a=function(){var a=function(t,i,n){var o=e.createElement(t);if(i&&(o.className=i),n){var a=e.createTextNode(n);o.appendChild(a)}return o},r=function(e,t,i){var n=a(o.DIV,"qz-box qz-box-inline qz-box-muted qz-text-center");if(e){var r=a(o.DIV,"qz-help-text",e);n.appendChild(r)}var l=a(o.STRONG,"qz-box-content "+i,t);return n.appendChild(l),n};return{style:function(){return a(o.STYLE,"",n.CSS)},header:function(){return a(o.P,"qz-box-head")},headerLaborTime:function(e){return r(i("labor"),e,"qz-text-green")},headerBalanceTime:function(e){return r(i("balance"),e,"qz-text-teal")},headerWeekPendingTime:function(e){return r(i("pending"),e,"qz-text-primary")},headerExtraTime:function(e){return r(i("extra"),e,"qz-text-green")},headerBeta:function(){var e=r("New","","fa fa-flask qz-text-golden");return e.className+=" qz-box-compact",e.onclick=function(){t.beta()},e},balanceTimePerDay:function(e){var t=a(o.DIV,"qz-help-text",i("balance")),n=a(o.STRONG,"qz-box-content qz-text-teal",e),r=a(o.DIV,"qz-box qz-box-muted");return r.appendChild(t),r.appendChild(n),r},laborTimePerDay:function(e){var t=a(o.DIV,"qz-help-text",i("labor")),n=a(o.STRONG,"qz-box-content qz-text-green",e),r=a(o.DIV,"qz-box qz-box-muted");return r.appendChild(t),r.appendChild(n),r},laborTimePerShift:function(e,t){var n=a(o.DIV,"qz-box qz-box-muted"),r=a(o.STRONG,"qz-box-content",e);if(!t){var l=a(o.DIV,"qz-help-text",i("working"));n.appendChild(l),r.classList.add("qz-text-golden")}return n.appendChild(r),n},todayTimeToLeave:function(e,t){var n=i(t?"exit+":"exit"),r=a(o.DIV,"qz-help-text",n),l=a(o.STRONG,"qz-box-content qz-text-primary",e),s=a(o.DIV,"qz-box qz-box-muted");return s.appendChild(r),s.appendChild(l),s}}}();t.module.snippet=a}(document,Queiroz),function(e,t){t.snippet;var i=function(){var t={HEAD:"head",BODY:"body",COLUMN_DAY:".DiaApontamento",CHECKPOINT:".FilledSlot span",DATE:"[id^=hiddenDiaApont]",HEADER:"#SemanaApontamentos div",TIME_IN:".TimeIN,.TimeINVisualizacao",FOOTER:"footer .LabelEmpresa"},i=function(e){setTimeout(e,25)},n=function(t,i){return(i||e).querySelector(t)},o=function(t,i){return(i||e).querySelectorAll(t)},a=function(t,o,a){i(function(){var i=n(t),r=e.createElement("div");"string"==typeof o?r.innerHTML=o:r.appendChild(o),i.appendChild(r),a&&a()})};return{collectData:function(){var e={},i=[];return o(t.COLUMN_DAY).forEach(function(e){var a={date:n(t.DATE,e).value,periods:[]};o(t.CHECKPOINT,e).forEach(function(e){var t=e.classList.value,i=e.textContent,n=a.periods;if(/TimeIN/.test(t))n.push({in:i,out:!1});else if(/TimeOUT/.test(t)){var o=n.last();o&&0==o.out?o.out=i:n.push({in:!1,out:i})}}),i.push(a)}),e.days=i,e},isLoaded:function(){return n(t.CHECKPOINT)},getAllColumnDay:function(){return o(t.COLUMN_DAY)},getAllCheckpoint:function(e){return o(t.CHECKPOINT,e)},getDateFromTargetAsString:function(e){return n(t.DATE,e).value},getAllTimeIn:function(e){return o(t.TIME_IN,e)},appendToHead:function(e){a(t.HEAD,e)},appendToBody:function(e,i){a(t.BODY,e,i)},appendToHeader:function(e){a(t.HEADER,e)},appendToFooter:function(e){n(t.FOOTER).textContent+=" | "+e}}}();t.module.view=i}(document,Queiroz),function(e){var t=e.settings,i=function(){var e=36e5*t.MAX_HOURS_PER_WEEK,i=6e4*t.MAX_MINUTES_PER_DAY,n=(t.MAX_CONSECUTIVE_HOURS_PER_DAY,function(e,t){return e instanceof Date&&t instanceof Date?t.getMillis()-e.getMillis():t-e}),o=function(e){var t=new Date;return e.getDayOfMonth()===t.getDayOfMonth()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},a=function(e){var t=e.split(" "),i=t[0].split("_"),n=t[1].split(":");return new Date(i[2],i[1]-1,i[0],n[0],n[1])},r=function(e){var t=parseInt(e/36e5),i=parseInt(e/6e4%60);return t.format(2)+":"+i.format(2)},l=function(e){return 0==e?"00:00":e>0?"+"+r(e):e<0?"-"+r(-1*e):void 0},s=function(e){e.days.forEach(function(e){e.periods.forEach(function(e){e.shift=!1,e.in&&e.out&&(e.shift=n(e.in,e.out))})})},u=function(e){e.totalLabor=0,e.days.forEach(function(t){t.labor=0,t.periods.forEach(function(e){e.shift&&(t.labor+=e.shift)}),e.totalLabor+=t.labor})},d=function(t){var n=new Date;t.totalPreviousBalance=0,t.days.forEach(function(e){e.balance=0-i+e.labor,e.date.getDayOfMonth()<n.getDayOfMonth()&&(t.totalPreviousBalance+=e.balance)}),t.totalBalance=0-e+t.totalLabor},m=function(e){e.days.forEach(function(e){var t=e.periods;if(o(e.date)&&t.length){var a=t.last();if(0==a.out&&e.labor<=i){var r=n(e.labor,i);a.leave=new Date(a.in.getMillis()+r),a.balancedLeave=a.leave+e.balance}}})};return{transformToDate:function(e){e.days.forEach(function(e){e.periods.forEach(function(t){t.in&&(t.in=a(e.date+" "+t.in)),t.out&&(t.out=a(e.date+" "+t.out))}),e.date=a(e.date+" 12:34")})},computeTimes:function(e){s(e),u(e),m(e),d(e)},transformToHuman:function(e){e.totalLabor=r(e.totalLabor),e.totalPreviousBalance=l(e.totalPreviousBalance),e.totalBalance=l(e.totalBalance),e.days.forEach(function(e){e.labor=r(e.labor),e.balance=l(e.balance),e.periods.forEach(function(e){e.in&&(e.in=e.in.getTimeAsString()),e.out&&(e.out=e.out.getTimeAsString()),e.shift&&(e.shift=r(e.shift))})})},hourToMillis:function(e){return 36e5*e},zero:"00:00",fake:"12:34",diff:n,toDate:a,isToday:o,minuteToMillis:function(e){return 6e4*e},millisToHuman:r,millisToHumanWithSign:l}}();e.module.time=i}(Queiroz),function(e){Array.prototype.last=function(){return this[this.length-1]},Number.prototype.format=function(e){for(var t=""+this;t.length<e;)t="0"+t;return t},Date.prototype.getTimeAsString=function(){return this.getHours().format(2)+":"+this.getMinutes().format(2)},Date.prototype.getDayOfMonth=function(){return this.getDate()},Date.prototype.getMillis=function(){return this.getTime()},Element.prototype.remove=function(){this.parentElement.removeChild(this)};var t=function(){return{textFormat:function(e,t){for(var i=0;i<t.length;i++){var n=new RegExp("\\{"+i+"\\}","g");e=e.replace(n,t[i])}return e}}}();e.module.util=t}(Queiroz),function(e){var t=e.settings,i=e.module,n=i.kairos,o=i.view,a=i.time,r=(i.util,i.snippet),l=function(){return a.hourToMillis(t.MAX_HOURS_PER_WEEK)},s=function(){return a.hourToMillis(t.MAX_CONSECUTIVE_HOURS_PER_DAY)},u=function(){return a.minuteToMillis(t.MAX_MINUTES_PER_DAY)},d={week:{laborTime:{millis:0,human:"",html:""},balanceTime:{millis:0,human:"",html:""},pendingTime:{millis:0,human:"",html:""},extraTime:{millis:0,human:"",html:""},_computePendingTimeInMillis:function(){return l()-this.laborTime.millis},_computeExtraTimeInMillis:function(){return this.laborTime.millis-l()},_buildHumanBalanceTime:function(){return a.millisToHumanWithSign(this.balanceTime.millis)},buildTime:function(){this.pendingTime.millis=this._computePendingTimeInMillis(),this.extraTime.millis=this._computeExtraTimeInMillis()},buildHumanTime:function(){this.laborTime.human=a.millisToHuman(this.laborTime.millis),this.balanceTime.human=this._buildHumanBalanceTime(),this.pendingTime.human=a.millisToHuman(this.pendingTime.millis>0?this.pendingTime.millis:0),this.extraTime.human=a.millisToHuman(this.extraTime.millis>0?this.extraTime.millis:0)},buildHtmlTime:function(){this.laborTime.html=r.headerLaborTime(this.laborTime.human),this.balanceTime.html=r.headerBalanceTime(this.balanceTime.human),this.pendingTime.html=r.headerWeekPendingTime(this.pendingTime.human),this.extraTime.html=r.headerExtraTime(this.extraTime.human)}},today:{laborTime:{millis:0}}},m=function(e){return o.getAllCheckpoint(e)},c=function(e){return o.getDateFromTargetAsString(e)},p=function(){return d.week.pendingTime.millis>=0?d.week.pendingTime.html:d.week.extraTime.html},f=function(e){var t=r.header();return e.forEach(function(e){e&&t.appendChild(e)}),t},h=function(){d.week.buildHumanTime(),d.week.buildHtmlTime();var e=d.week.balanceTime.html,t=p();l()-d.week.laborTime.millis<s()&&(e="");var i=[d.week.laborTime.html,e,t,r.headerBeta()],n=f(i);o.appendToHeader(n)},b=function(){"ON"===t.LAST_WEEK_MODE&&(t.LAST_WEEK_MODE="DOING"),d.week.buildTime(),"DOING"!==t.LAST_WEEK_MODE&&h()},T=function(e,t,i){t<0&&(t=0);var n=a.millisToHuman(t),o=r.laborTimePerShift(n,i);document.createElement("div").appendChild(o);var l=e.parentNode;l.parentNode.insertBefore(o,l.nextSibling)},g=function(e,t){var i=a.millisToHuman(t);e.appendChild(r.laborTimePerDay(i))},x=function(e,t){var i=a.isToday(a.toDate(c(e)+" "+a.fake)),n=u(),o=0,l=a.zero;t<n?(o=n-t,l="-"+a.millisToHuman(o),0==i&&(d.week.balanceTime.millis-=o)):t>n&&(o=t-n,l="+"+a.millisToHuman(o),0==i&&(d.week.balanceTime.millis+=o)),0==i&&e.appendChild(r.balanceTimePerDay(l))},v=function(e,t){if(t&&d.week.balanceTime.millis){var i=u()-d.today.laborTime.millis-d.week.balanceTime.millis,n=t+(i<0?0:i),o=new Date(n).getTimeAsString(),a=r.todayTimeToLeave(o,!0),l=e.parentNode;l.parentNode.insertBefore(a,l.nextSibling)}},E=function(e,t){if(t&&d.today.laborTime.millis<u()){v(e,t);var i=t+(u()-d.today.laborTime.millis),n=new Date(i).getTimeAsString(),o=r.todayTimeToLeave(n,!1),a=e.parentNode;a.parentNode.insertBefore(o,a.nextSibling)}},z=function(e){var i=m(e);if(i.length){var n=0;o.getAllTimeIn(e).forEach(function(o,r){var l=o.textContent;if(0!=l){var u=a.toDate(c(e)+" "+l),m=i[2*r+1];if(m&&0==m.parentElement.classList.contains("LastSlot")){var p=m.textContent,f=a.toDate(c(e)+" "+p),h=a.diff(u,f);n+=h,"DOING"!==t.LAST_WEEK_MODE&&T(m,h,!0),a.isToday(u)&&(d.today.laborTime.millis+=h)}else{E(o,u.getMillis());var b=a.diff(u,new Date);b<s()&&T(o,n+b,!1)}}}),n>0&&(d.week.laborTime.millis+=n,g(e,n)),x(e,n)}},y=function(){var e=[],i=!1;return o.getAllColumnDay().forEach(function(n){var o=c(n)+" "+a.fake,r=a.toDate(o);0===d.week.laborTime.millis?i||(i=r.getDay()===t.INITIAL_WEEKDAY)?e.push(n):n.remove():r.getDay()===t.INITIAL_WEEKDAY?t.LAST_WEEK_MODE="DONE":"DOING"===t.LAST_WEEK_MODE&&e.push(n)}),e},D=function(){o.appendToHead(r.style()),y().forEach(z),b(),"DOING"===t.LAST_WEEK_MODE&&(n.nextWeek(),setTimeout(_,1e3))},_=function(){var e=setInterval(function(){o.isLoaded()&&(clearInterval(e),D())},t.USERSCRIPT_DELAY_MILLIS)};e.bless=function(e){return t.LAST_WEEK_MODE=!!e&&"ON","ON"===t.LAST_WEEK_MODE?(n.backWeek(),setTimeout(_,1e3)):o.isLoaded()?D():_(),o.appendToFooter(this.description),this.description},e.beta=function(){var e=document.querySelector(".qz-modal");if(e)return e.classList.remove("js-hide"),void e.classList.add("js-show");o.appendToBody('<div class="qz-modal"><div class="qz-modal-dialog"><div class="qz-modal-content"><div class="qz-modal-header">Queiroz.js 3.0 is coming <button class="qz-modal-close"><span class="fa fa-times"></span></button></div><div class="qz-modal-body qz-text-center"><h1>Coming soon!</h1></div><div class="qz-modal-footer"><small>Queiroz.js 2.9.8</small></div></div></div></div>',function(){document.querySelector(".qz-modal-close").onclick=function(){e||(e=document.querySelector(".qz-modal")),e.classList.remove("js-show"),e.classList.add("js-hide")}})}}(Queiroz),Queiroz.bless();